{"version":3,"sources":["Consts.js","requests.js","components/GameCard.js","components/GameList.js","components/CustomDropDown.js","components/CustomPagination.js","App.js","index.js"],"names":["Hosts","Tesera","title","linkIdField","makeLink","linkId","ratingField","sortField","BGG","makeLinks","info","Object","values","map","href","Card","Img","src","photo","alt","ImgOverlay","className","numRating","Badge","variant","gameRating","Body","style","zIndex","Title","Text","desc","links","link","idx","Link","as","target","isLoading","data","Alert","transition","show","id","value","items","onChange","val","onClick","text","pageCount","activePage","onChangePage","Pagination","Array","from","keys","num","Item","active","e","page","Number","window","scrollTo","top","behavior","App","useState","source","setSource","count","setCount","setActivePage","setPageCount","gameList","setGameList","setLoading","useEffect","host","sort","axios","get","then","res","teseraId","descriptionShort","photoUrl","fetchGameList","catch","console","error","Math","ceil","entries","slice","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.cb3c8104.chunk.js","sourcesContent":["export const Hosts = {\n\tTesera: {\n\t\ttitle: \"Tesera\",\n\t\tlinkIdField: \"alias\",\n\t\tmakeLink: (linkId) => `https://tesera.ru/game/${linkId}`,\n\t\tratingField: \"ratingUser\",\n\t\tsortField: \"-ratingn10\",\n\t},\n\tBGG: {\n\t\ttitle: \"BoardGameGeek\",\n\t\tlinkIdField: \"bggId\",\n\t\tmakeLink: (linkId) => `https://www.boardgamegeek.com/boardgame/${linkId}`,\n\t\tratingField: \"bggGeekRating\",\n\t\tsortField: \"-ratinggeekbgg\",\n\t},\n};\n\nexport const GAME_REQUEST_URL = \"https://api.tesera.ru/games\";\n","import { GAME_REQUEST_URL, Hosts } from \"./Consts\";\nimport axios from \"axios\";\n\nconst makeLinks = (info) => {\n\treturn Object.values(Hosts).map(({ title, linkIdField, makeLink }) => {\n\t\treturn {\n\t\t\ttitle: title,\n\t\t\thref: makeLink(info[linkIdField]),\n\t\t};\n\t});\n};\n\nconst fetchGameList = (host, count) => {\n\tconst sort = Hosts[host]?.sortField || \"-ratingn10\";\n\treturn axios\n\t\t.get(`${GAME_REQUEST_URL}?offset=${0}&limit=${count}&WithAdditions=false&sort=${sort}`)\n\t\t.then((res) => {\n\t\t\tconst ratingField = Hosts[host]?.ratingField || \"ratingUser\";\n\t\t\treturn res.data.map((info, idx) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: info.teseraId,\n\t\t\t\t\ttitle: info.title,\n\t\t\t\t\tdesc: info.descriptionShort,\n\t\t\t\t\tphoto: info.photoUrl,\n\t\t\t\t\tnumRating: idx + 1,\n\t\t\t\t\tgameRating: info[ratingField],\n\t\t\t\t\tlinks: makeLinks(info),\n\t\t\t\t};\n\t\t\t});\n\t\t});\n};\n\nexport { fetchGameList };\n","import React from \"react\";\nimport { Card, Badge } from \"react-bootstrap\";\nimport \"./GameCard.css\";\n\nexport default ({ info }) => (\n\t<Card>\n\t\t<Card.Img src={info.photo} alt=\"game image\" />\n\t\t<Card.ImgOverlay>\n\t\t\t<div className=\"rating\">{info.numRating}</div>\n\t\t\t<Badge className=\"pull-right\" variant=\"success\" title=\"rating\">\n\t\t\t\t{info.gameRating}\n\t\t\t</Badge>\n\t\t</Card.ImgOverlay>\n\t\t<Card.Body style={{ zIndex: 1000 }}>\n\t\t\t<Card.Title>{info.title}</Card.Title>\n\t\t\t<Card.Text>{info.desc}</Card.Text>\n\t\t\t{info.links.map((link, idx) => (\n\t\t\t\t<Card.Link key={idx} as=\"a\" href={link.href} target=\"_blank\">\n\t\t\t\t\t{link.title}\n\t\t\t\t</Card.Link>\n\t\t\t))}\n\t\t</Card.Body>\n\t</Card>\n);\n","import React from \"react\";\nimport { Alert } from \"react-bootstrap\";\nimport GameCard from \"./GameCard\";\nimport \"./GameList.css\";\n\nexport default ({ isLoading, data }) => {\n\treturn (\n\t\t<div className=\"game-list\">\n\t\t\t<Alert transition={false} className=\"alert\" show={isLoading} variant=\"info\">\n\t\t\t\tLoading...\n\t\t\t</Alert>\n\t\t\t{data.map((info) => (\n\t\t\t\t<GameCard key={info.id} info={info} />\n\t\t\t))}\n\t\t</div>\n\t);\n};\n","import React from \"react\";\nimport \"./CustomDropDown.css\";\n\nexport default ({ value, items, onChange }) => {\n\treturn (\n\t\t<div className=\"custom-dropdown\">\n\t\t\t{value}\n\t\t\t<ul className=\"custom-dropdown-menu\">\n\t\t\t\t{items.map((val, idx) => (\n\t\t\t\t\t<li\n\t\t\t\t\t\tkey={idx}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tonChange(val.value ?? val);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{val.text ?? val}\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</div>\n\t);\n};\n","import { Pagination } from \"react-bootstrap\";\nimport React from \"react\";\nimport \"./CustomPagination.css\";\n\nexport default ({ pageCount, activePage, onChangePage }) => {\n\treturn (\n\t\t<Pagination>\n\t\t\t{Array.from(Array(pageCount).keys()).map((num, idx) => (\n\t\t\t\t<Pagination.Item\n\t\t\t\t\tkey={idx}\n\t\t\t\t\tactive={activePage === num + 1}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\tconst page = Number(e.target.text || activePage);\n\t\t\t\t\t\tonChangePage(page);\n\t\t\t\t\t\twindow.scrollTo({ top: 0, behavior: \"smooth\" });\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{num + 1}\n\t\t\t\t</Pagination.Item>\n\t\t\t))}\n\t\t</Pagination>\n\t);\n};\n","import React, { useEffect, useState } from \"react\";\nimport \"./styles.css\";\nimport { Hosts } from \"./Consts\";\nimport { fetchGameList } from \"./requests\";\nimport GameList from \"./components/GameList\";\nimport CustomDropDown from \"./components/CustomDropDown\";\nimport CustomPagination from \"./components/CustomPagination\";\n\nexport default function App() {\n\tconst CARD_PER_PAGE = 10;\n\tconst [source, setSource] = useState(\"BGG\");\n\tconst [count, setCount] = useState(10);\n\tconst [activePage, setActivePage] = useState(1);\n\tconst [pageCount, setPageCount] = useState(1);\n\tconst [gameList, setGameList] = useState([]);\n\tconst [isLoading, setLoading] = useState(false);\n\n\tuseEffect(() => {\n\t\tsetLoading(false);\n\t}, [gameList]);\n\n\tuseEffect(() => {\n\t\tsetLoading(true);\n\t\tfetchGameList(source, count).then(setGameList).catch(console.error);\n\t}, [source, count]);\n\n\tuseEffect(() => {\n\t\tsetPageCount(Math.ceil(count / CARD_PER_PAGE));\n\t\tsetActivePage(1);\n\t}, [count]);\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<h1>\n\t\t\t\tТоп <CustomDropDown value={count} items={[10, 25, 50, 100]} onChange={setCount} />{\" \"}\n\t\t\t\tНастольных Игр по версии{\" \"}\n\t\t\t\t<CustomDropDown\n\t\t\t\t\tvalue={Hosts[source].title}\n\t\t\t\t\titems={Object.entries(Hosts).map((host) => ({\n\t\t\t\t\t\tvalue: host[0],\n\t\t\t\t\t\ttext: host[1].title,\n\t\t\t\t\t}))}\n\t\t\t\t\tonChange={setSource}\n\t\t\t\t/>\n\t\t\t</h1>\n\t\t\t<GameList\n\t\t\t\tisLoading={isLoading}\n\t\t\t\tdata={gameList.slice((activePage - 1) * CARD_PER_PAGE, activePage * CARD_PER_PAGE)}\n\t\t\t/>\n\t\t\t{count > CARD_PER_PAGE && (\n\t\t\t\t<CustomPagination\n\t\t\t\t\tpageCount={pageCount}\n\t\t\t\t\tonChangePage={setActivePage}\n\t\t\t\t\tactivePage={activePage}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n\t<StrictMode>\n\t\t<App />\n\t</StrictMode>,\n\trootElement\n);\n"],"sourceRoot":""}