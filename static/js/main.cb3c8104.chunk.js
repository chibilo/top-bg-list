(this.webpackJsonptop10bg=this.webpackJsonptop10bg||[]).push([[0],{32:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(9),c=n.n(i),r=n(8),s=(n(32),{Tesera:{title:"Tesera",linkIdField:"alias",makeLink:function(e){return"https://tesera.ru/game/".concat(e)},ratingField:"ratingUser",sortField:"-ratingn10"},BGG:{title:"BoardGameGeek",linkIdField:"bggId",makeLink:function(e){return"https://www.boardgamegeek.com/boardgame/".concat(e)},ratingField:"bggGeekRating",sortField:"-ratinggeekbgg"}}),o=n(24),l=n.n(o),u=function(e){return Object.values(s).map((function(t){var n=t.title,a=t.linkIdField;return{title:n,href:(0,t.makeLink)(e[a])}}))},d=n(61),j=n(62),g=n(60),b=(n(51),n(1)),h=function(e){var t=e.info;return Object(b.jsxs)(j.a,{children:[Object(b.jsx)(j.a.Img,{src:t.photo,alt:"game image"}),Object(b.jsxs)(j.a.ImgOverlay,{children:[Object(b.jsx)("div",{className:"rating",children:t.numRating}),Object(b.jsx)(g.a,{className:"pull-right",variant:"success",title:"rating",children:t.gameRating})]}),Object(b.jsxs)(j.a.Body,{style:{zIndex:1e3},children:[Object(b.jsx)(j.a.Title,{children:t.title}),Object(b.jsx)(j.a.Text,{children:t.desc}),t.links.map((function(e,t){return Object(b.jsx)(j.a.Link,{as:"a",href:e.href,target:"_blank",children:e.title},t)}))]})]})},m=(n(53),function(e){var t=e.isLoading,n=e.data;return Object(b.jsxs)("div",{className:"game-list",children:[Object(b.jsx)(d.a,{transition:!1,className:"alert",show:t,variant:"info",children:"Loading..."}),n.map((function(e){return Object(b.jsx)(h,{info:e},e.id)}))]})}),f=(n(56),function(e){var t=e.value,n=e.items,a=e.onChange;return Object(b.jsxs)("div",{className:"custom-dropdown",children:[t,Object(b.jsx)("ul",{className:"custom-dropdown-menu",children:n.map((function(e,t){var n;return Object(b.jsx)("li",{onClick:function(){var t;a(null!==(t=e.value)&&void 0!==t?t:e)},children:null!==(n=e.text)&&void 0!==n?n:e},t)}))})]})}),O=n(63),v=(n(57),function(e){var t=e.pageCount,n=e.activePage,a=e.onChangePage;return Object(b.jsx)(O.a,{children:Array.from(Array(t).keys()).map((function(e,t){return Object(b.jsx)(O.a.Item,{active:n===e+1,onClick:function(e){var t=Number(e.target.text||n);a(t),window.scrollTo({top:0,behavior:"smooth"})},children:e+1},t)}))})});function p(){var e=Object(a.useState)("BGG"),t=Object(r.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(10),o=Object(r.a)(c,2),d=o[0],j=o[1],g=Object(a.useState)(1),h=Object(r.a)(g,2),O=h[0],p=h[1],x=Object(a.useState)(1),k=Object(r.a)(x,2),w=k[0],I=k[1],C=Object(a.useState)([]),F=Object(r.a)(C,2),N=F[0],S=F[1],y=Object(a.useState)(!1),G=Object(r.a)(y,2),L=G[0],B=G[1];return Object(a.useEffect)((function(){B(!1)}),[N]),Object(a.useEffect)((function(){B(!0),function(e,t){var n,a=(null===(n=s[e])||void 0===n?void 0:n.sortField)||"-ratingn10";return l.a.get("".concat("https://api.tesera.ru/games","?offset=",0,"&limit=").concat(t,"&WithAdditions=false&sort=").concat(a)).then((function(t){var n,a=(null===(n=s[e])||void 0===n?void 0:n.ratingField)||"ratingUser";return t.data.map((function(e,t){return{id:e.teseraId,title:e.title,desc:e.descriptionShort,photo:e.photoUrl,numRating:t+1,gameRating:e[a],links:u(e)}}))}))}(n,d).then(S).catch(console.error)}),[n,d]),Object(a.useEffect)((function(){I(Math.ceil(d/10)),p(1)}),[d]),Object(b.jsxs)("div",{className:"App",children:[Object(b.jsxs)("h1",{children:["\u0422\u043e\u043f ",Object(b.jsx)(f,{value:d,items:[10,25,50,100],onChange:j})," ","\u041d\u0430\u0441\u0442\u043e\u043b\u044c\u043d\u044b\u0445 \u0418\u0433\u0440 \u043f\u043e \u0432\u0435\u0440\u0441\u0438\u0438"," ",Object(b.jsx)(f,{value:s[n].title,items:Object.entries(s).map((function(e){return{value:e[0],text:e[1].title}})),onChange:i})]}),Object(b.jsx)(m,{isLoading:L,data:N.slice(10*(O-1),10*O)}),d>10&&Object(b.jsx)(v,{pageCount:w,onChangePage:p,activePage:O})]})}var x=document.getElementById("root");c.a.render(Object(b.jsx)(a.StrictMode,{children:Object(b.jsx)(p,{})}),x)}},[[58,1,2]]]);
//# sourceMappingURL=main.cb3c8104.chunk.js.map